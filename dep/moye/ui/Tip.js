/*! 2015 Baidu Inc. All Rights Reserved */
define("moye/ui/Tip",["require","jquery","./Control","./Popup","./painter"],function(require){var t=require("jquery"),e=require("./Control"),i=require("./Popup"),s=i.extend({type:"Tip",options:{target:"",triggers:".tooltips",liveTriggers:"",arrow:!1,showDelay:100,hideDelay:300,mode:"over",content:"",dir:"bl",offset:{x:0,y:0}},init:function(t){t.arrow&&(t.dir=t.arrow),this.$parent(t)},initStructure:function(){var e=this,i=e.helper,s=""+i.getPartHTML("arrow","div","<em></em><ins></ins>")+i.getPartHTML("body","div",e.body||"");t(e.main).css("left","-2000px").appendTo(document.body).html(s),e.elements={arrow:i.getPart("arrow"),body:i.getPart("body")}},initEvents:function(){this.$parent()},repaint:require("./painter").createRepaint(e.prototype.repaint,{name:"content",paint:function(t,e){this.setContent(e)}},function(t,e){if(!this.helper.isInStage("RENDERED"))return this;var i=e.liveTriggers,s=e.triggers;if(!i&&!s)return this;else return this.clearTriggersEvents(s.oldValue,i.oldValue),void this.bindTriggersEvents(s.newValue,i.newValue)}),setContent:function(e){this.content=e||"",t(this.elements.body).html(this.content)},refresh:function(t){this.clearTriggersEvents(this.triggers,this.liveTriggers),this.triggers=t,this.bindTriggersEvents(this.triggers,this.liveTriggers)},locate:function(e){this.$parent(e);var i=t(this.main),s=this.elements.arrow;if(this.arrow===!1)return void t(s).hide();e=t(e);var n={l:"left",r:"right",t:"top",b:"bottom"},a=this.offset,r=a.x,o=a.y,h=e.offset(),l=e.outerWidth(),u=e.outerHeight(),c=h.top,d=h.left,p=d+l,f=c+u,m=this.helper,g=this._dir,v=g.charAt(0),y=g.charAt(1),b=i.outerWidth(),C=i.outerHeight();s.className=""+m.getPartClassName("arrow")+" "+m.getPartClassName("arrow-"+n[v]);var x=s.firstChild.offsetWidth,w=s.firstChild.offsetHeight;if({t:1,b:1}[v]){var P=(l-x)/2;t(s).css({left:{c:(b-x)/2,l:P-r,r:b-Math.max(x,P)+r}[l>b?"c":y]+"px",top:""}),c={t:c-w-C-o,b:f+w+o}[v],i.css("top",c+"px")}else if({l:1,r:1}[v]){var T=(u-w)/2;t(s).css({top:{c:(C-w)/2,t:T-o,b:C-Math.max(w,T)+o}[u>C?"c":y]+"px",left:""}),d={l:d-x-b-r,r:p+x+r}[v],i.css("left",d+"px")}}});return s});