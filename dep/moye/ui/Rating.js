/*! 2015 Baidu Inc. All Rights Reserved */
define("moye/ui/Rating",["require","jquery","./Control","./painter"],function(require){var t=require("jquery"),e=require("./Control"),i=require("./painter"),n=e.extend({options:{max:5,value:0},type:"Rating",init:function(t){this.$parent(t);var e=this.helper;this.ratedClass=e.getPartClassName("star-on"),this.itemClass=e.getPartClassName("star")},initStructure:function(){var e=this.helper,i=this.options,n=e.getPartClassName(),s=t(this.main);if(s.find("."+n).data("dom-inited")===!0)return this.value=s.find("."+this.ratedClass).length,void(this.max=s.find("."+this.itemClass).length);for(var r=['<ul class="'+n+'">'],a=0;a<i.max;a++)r.push("<li ",'class="'+this.itemClass+'" ','data-value="'+(a+1)+'"',">",i.skin?"":"â˜†","</li>");r.push("</ul>"),this.main.innerHTML=r.join("")},initEvents:function(){this.$stars=t(this.main).find("."+this.itemClass),this.delegate(this.main,"click","."+this.itemClass,this.onClick),this.delegate(this.main,"mouseover","."+this.itemClass,this.onMouseOver),this.delegate(this.main,"mouseout","."+this.itemClass,this.onMouseOut)},repaint:i.createRepaint(e.prototype.repaint,{name:["value"],paint:function(t,e){e=parseInt(e||0,10),this.resetStars(),this.fillStars(e)}}),onClick:function(e){var i,n=t(e.target),s=this.value;if(!this.isDisabled())if(i=parseInt(n.attr("data-value"),10),i!==s)this.set("value",i),this.fire("change",{value:i})},onMouseOver:function(e){var i=t(e.target),n=parseInt(i.attr("data-value"),10);if(!this.isDisabled())this.resetStars(),this.fillStars(n),this.fire("hover",{value:n})},onMouseOut:function(t){if(!this.isDisabled())this.resetStars(),this.fillStars(this.value),this.fire("hover",{value:this.value})},resetStars:function(){this.$stars.removeClass(this.ratedClass)},fillStars:function(e){var i=this.$stars.slice(0,e);t(i).addClass(this.ratedClass)},getValue:function(){return this.value},setValue:function(t,e){t=parseInt(t,10),this.set("value",t),e&&this.fire("change",{value:t})}});return n});