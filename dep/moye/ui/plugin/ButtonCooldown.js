/*! 2015 Baidu Inc. All Rights Reserved */
define("moye/ui/plugin/ButtonCooldown",["require","jquery","./Plugin","../lib"],function(require){var t=require("jquery"),e=require("./Plugin"),i=require("../lib"),n=e.extend({$class:"ButtonCooldown",options:{message:"!{count}ç§’",cooldown:6e4,interval:1e3},activate:function(e){this.target=e,e.startCooldown=t.proxy(this.startCooldown,this),e.stopCooldown=t.proxy(this.stopCooldown,this),e.isCooling=t.proxy(this.isCooling,this),this.updateButtonText=t.proxy(this.updateButtonText,this)},dispose:function(){this.target=null},startCooldown:function(t,e,i){return this.stopCooldown(),this.cache=this.target.getText(),this.interval=e||this.interval,this.message=i||this.message,this.cooldown=t,this.updateButtonText(),this.cooldownTimer=setInterval(this.updateButtonText,this.interval),this.target.disable(),this.target},stopCooldown:function(){return clearInterval(this.cooldownTimer),this.cooldown=0,this.cooldownTimer=0,this.target.enable(),this.restore(),this.target},isCooling:function(){return!!this.cooldownTimer},updateButtonText:function(){var t=this.cooldown;t>0?this.target.setText(i.format(this.message,{count:t/this.interval})):this.stopCooldown(),this.cooldown-=this.interval},restore:function(){if(this.cache)this.target.setText(this.cache),this.cache=""}});return n});