/*! 2014 Baidu Inc. All Rights Reserved */
define("Tabs",["require","./lib","./Control"],function(require){var t=require("./lib"),e=require("./Control"),i={onClick:function(e){var i=this.main,s=this.options,n=t.getTarget(e);if("LI"!==n.tagName)if(n=t.getAncestorBy(n,function(t){return"LI"===t.tagName||t===i}),n===i)return;var a=s.prefix+"-selected",r=t.hasClass(n,a),o=0|n.getAttribute("data-index");if(!r&&this.onBeforeChange(this.selectedIndex,o)!==!1){var l=this.labels;t.removeClass(l[this.selectedIndex],a),t.addClass(l[o],a);var h=l[o];this.fire("change",{selected:h,oldIndex:this.selectedIndex,newIndex:o}),this.selectedIndex=o}}},s=e.extend({type:"Tabs",options:{disabled:!1,main:"",prefix:"ecl-ui-tabs",selectedIndex:0},init:function(e){this.main=t.g(e.main),this.labels=t.q(e.prefix+"-labels",this.main)[0],this.selectedIndex=0|e.selectedIndex,this.bindEvents(i)},render:function(){var e=this.options;if(!this.rendered){this.rendered=!0,t.on(this.labels,"click",this._bound.onClick);var i=t.toArray(this.labels.getElementsByTagName("li")),s=t.browser.ie6;t.each(i,function(t,e){if(t.setAttribute("data-index",e),s)t.innerHTML+="<i></i>"});var n=e.prefix+"-selected",a=t.q(n,this.labels)[0];if(this.labels=i,a)this.selectedIndex=0|a.getAttribute("data-index");else a=i[this.selectedIndex],a&&t.fire(a,"click")}return this},onBeforeChange:function(){return!0}});return s});