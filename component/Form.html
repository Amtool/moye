<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <title>Moye</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="icon" href="/favicon.png">
    
    
    
<link rel="stylesheet" href="/moye/css/post.css" type="text/css">

    
    <link rel="alternative" href="/atom.xml" title="Moye" type="application/atom+xml">
    
</head>
<body>
    
    <div id="container">
    <article id="post-Form" class="article article-type-post" itemscope itemprop="blogPost">

  <nav class="article-nav">

  <a class="article-nav-logo" href="/moye/index.html">
    <img src="/moye/img/moye.png" alt="moye" /> Moye
  </a>

  
    <div class="article-nav-category">
      <h4 class="article-nav-category-title">
        
        <a class="article-nav-category-link" href=/moye/introduction/get-started.html>开始</a>
        
      </h4>

      
    </div>
  
    <div class="article-nav-category">
      <h4 class="article-nav-category-title">
        
        组件
        
      </h4>

      
        <a class="article-nav-category-link "
          href="/moye/component/Button.html">
          按钮 / Button 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/Calendar.html">
          日历 / Calendar 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/City.html">
          城市选择器 / City 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/Dialog.html">
          对话框 / Dialog 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/LazyImg.html">
          懒图片 / LazyImg 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/Marquee.html">
          走马灯 / Marquee 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/Pager.html">
          翻页器 / Pager 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/Popup.html">
          浮层 / Popup 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/Rating.html">
          评分 / Rating 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/Select.html">
          下拉框 / Select 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/Slider.html">
          轮播图 / Slider 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/Tab.html">
          选项卡 / Tab 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/TextBox.html">
          文本框 / TextBox 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/Tip.html">
          提示 / Tip 
        </a>
      
        <a class="article-nav-category-link current"
          href="/moye/component/Form.html">
          表单 / Form 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/component/BoxGroup.html">
          单复选框 / BoxGroup 
        </a>
      
    </div>
  
    <div class="article-nav-category">
      <h4 class="article-nav-category-title">
        
        简介
        
      </h4>

      
        <a class="article-nav-category-link "
          href="/moye/introduction/get-started.html">
          开始 / get started 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/introduction/best-practice.html">
          最佳实践 / best practice 
        </a>
      
    </div>
  
    <div class="article-nav-category">
      <h4 class="article-nav-category-title">
        
        开发 moye
        
      </h4>

      
        <a class="article-nav-category-link "
          href="/moye/introduction/develop.html">
          开发指南 / introduction 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/introduction/plugin.html">
          插件 / Plugin 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/introduction/life-cycle.html">
          生命周期 / life cycle 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/introduction/skin.html">
          皮肤 / skin 
        </a>
      
        <a class="article-nav-category-link "
          href="/moye/introduction/inherits.html">
          继承 / inherits 
        </a>
      
    </div>
  

</nav>


  <div class="article-content">
    <header class="article-header">
      
  
    <h1 class="article-title" itemprop="name">
      表单 / Form
      <!-- Place this tag where you want the button to render. -->
      <a class="github-button" href="https://github.com/ecomfe/moye" data-icon="octicon-star" data-style="mega" data-count-href="/ecomfe/moye/stargazers" data-count-api="/repos/ecomfe/moye#stargazers_count" data-count-aria-label="# stargazers on GitHub" aria-label="Star ecomfe/moye on GitHub">Star</a>
    </h1>
  


    </header>
    <div class="article-entry markdown-body" itemprop="articleBody">
      <h3 id="基本表单使用">基本表单使用</h3><iframe height="268" scrolling="no" src="//codepen.io/wuhy/embed/XbGNZp/?height=268&theme-id=17700&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/wuhy/pen/XbGNZp/" target="_blank" rel="external">Form</a> by spark (<a href="http://codepen.io/wuhy" target="_blank" rel="external">@wuhy</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe>

<p><strong>注意：</strong> 禁用的表单项，不会出现在 <code>getData</code> 接口返回的数据里。为了能获取到对应的表单数据，需要对每个表单控件设置 <code>name</code> 属性。</p>
<p>默认，表单项是没有校验功能，可以使用下面的表单校验插件开启校验，如果还是无法满足你的需求，你也可以强制性重写表单的 <code>validate</code> 方法。</p>
<p>对于 <code>submit</code> 类型的按钮，会自动触发 <code>submit</code> 事件，对于普通的按钮，如果想自动触发 <code>submit</code> 逻辑，可以使用 <code>FormSubmit</code> 插件：</p>
<figure class="highlight js"><figcaption><span>自动提交</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 要求 require `moye/plugin/FormSubmit` 插件</span></span><br><span class="line"><span class="keyword">var</span> form = <span class="keyword">new</span> Form(&#123;</span><br><span class="line">    main: <span class="built_in">document</span>.getElementById(<span class="string">'my-form'</span>),</span><br><span class="line">    target: <span class="string">'my-frame'</span>,</span><br><span class="line">    plugins: [ <span class="comment">// 启用 FormSubmit 插件</span></span><br><span class="line">        &#123;</span><br><span class="line">            type: <span class="string">'FormSubmit'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                triggers: [<span class="string">'save-btn'</span>] <span class="comment">// 配置要自动触发 `submit` 的按钮 id 或 控件的 id</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="表单关联域联动">表单关联域联动</h3><iframe height="266" scrolling="no" src="//codepen.io/wuhy/embed/MwxJam/?height=266&theme-id=17700&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/wuhy/pen/MwxJam/" target="_blank" rel="external">Moye Form Relation Plugin</a> by spark (<a href="http://codepen.io/wuhy" target="_blank" rel="external">@wuhy</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe>


<p>经常会有这种需求，比如当某个控件值发生变化时候，某个或某些控件需要发生联动变化，这时候可以使用 <code>FormRelation</code> 插件，为了监控这些表单域变化，需要使用 <code>FormFieldWatcher</code> 插件。</p>
<figure class="highlight js"><figcaption><span>表单域联动</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 要求 require `moye/plugin/FormFieldWatcher` 插件</span></span><br><span class="line"><span class="comment">// 要求 require `moye/plugin/FormRelation` 插件</span></span><br><span class="line"><span class="comment">// 下面这段代码做的事情非常简单：只有姓名和邮箱都不为空的时候，提交按钮才可用</span></span><br><span class="line"><span class="keyword">var</span> form = <span class="keyword">new</span> Form(&#123;</span><br><span class="line">    main: <span class="built_in">document</span>.getElementById(<span class="string">'my-form'</span>),</span><br><span class="line">    target: <span class="string">'my-frame'</span>,</span><br><span class="line">    plugins: [</span><br><span class="line">        &#123;</span><br><span class="line">            type: <span class="string">'FormFieldWatcher'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                eventTypes: [<span class="string">'input'</span>, <span class="string">'change'</span>] <span class="comment">// 配置要监控的表单域的事件类型</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            type: <span class="string">'FormRelation'</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">                relations: [</span><br><span class="line">                    &#123;</span><br><span class="line">                        dependences: [</span><br><span class="line">                            &#123;</span><br><span class="line">                                id: <span class="string">'uNameTextBox'</span>, <span class="comment">// 控件 id</span></span><br><span class="line">                                logic: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; <span class="comment">// 要触发联动的逻辑条件定义</span></span><br><span class="line">                                    <span class="keyword">return</span> !<span class="keyword">this</span>.getValue();</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;,</span><br><span class="line">                            &#123;</span><br><span class="line">                                id: <span class="string">'emailTextBox'</span>,</span><br><span class="line">                                logic: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">                                    <span class="keyword">return</span> !<span class="keyword">this</span>.getValue();</span><br><span class="line">                                &#125;</span><br><span class="line">                            &#125;</span><br><span class="line">                        ],</span><br><span class="line">                        <span class="comment">// 触发联动效果的依赖表单域需要满足的条件</span></span><br><span class="line">                        <span class="comment">// 这里定义条件为只要上面的依赖逻辑条件任何一个为 true 就会触发目标</span></span><br><span class="line">                        <span class="comment">// 控件的联动行为</span></span><br><span class="line">                        pattern: FormRelation.patterns.any,</span><br><span class="line">                        targets: [<span class="string">'submitBtn'</span>], <span class="comment">// 要触发联动的目标控件 id</span></span><br><span class="line">                        actions: [</span><br><span class="line">                            <span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123; <span class="comment">// 联动行为</span></span><br><span class="line">                                result ? <span class="keyword">this</span>.disable() : <span class="keyword">this</span>.enable();</span><br><span class="line">                            &#125;</span><br><span class="line">                        ]</span><br><span class="line">                    &#125;</span><br><span class="line">                ]</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    ]</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
<h3 id="表单校验">表单校验</h3><iframe height="266" scrolling="no" src="//codepen.io/wuhy/embed/OVqWXP/?height=266&theme-id=17700&default-tab=result" frameborder="no" allowtransparency="true" allowfullscreen="true" style="width: 100%;">See the Pen <a href="http://codepen.io/wuhy/pen/OVqWXP/" target="_blank" rel="external">Moye Form Validate</a> by spark (<a href="http://codepen.io/wuhy" target="_blank" rel="external">@wuhy</a>) on <a href="http://codepen.io" target="_blank" rel="external">CodePen</a>.<br></iframe>

<p><code>Moye</code> 预定义的校验规则：</p>
<ul>
<li><p><code>moye/plugin/validator/email</code> : 邮件校验规则</p>
</li>
<li><p><code>moye/plugin/validator/identity</code> : 身份证校验规则</p>
</li>
<li><p><code>moye/plugin/validator/max</code> : 最大值校验规则</p>
</li>
<li><p><code>moye/plugin/validator/min</code> : 最小值校验规则</p>
</li>
<li><p><code>moye/plugin/validator/maxlength</code> : 最大长度校验规则</p>
</li>
<li><p><code>moye/plugin/validator/minlength</code> : 最小长度校验规则</p>
</li>
<li><p><code>moye/plugin/validator/mobile</code> : 手机号码校验规则</p>
</li>
<li><p><code>moye/plugin/validator/natural</code> : 数字验规则</p>
</li>
<li><p><code>moye/plugin/validator/required</code> : 不为空校验规则</p>
</li>
</ul>
<p>如果没有想要的校验规则，可以自定义自己的校验规则，具体参考上述校验规则实现。</p>
<figure class="highlight js"><figcaption><span>校验规则添加</span></figcaption><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 为了实现表单自动校验，需要添加表单域的校验规则，需要先 require 如下几个插件：</span></span><br><span class="line"><span class="comment">// `moye/plugin/Validator`</span></span><br><span class="line"><span class="comment">// `moye/plugin/ValidateTip`  如果要添加校验提示，需要这个插件</span></span><br><span class="line"><span class="comment">// `moye/plugin/validator/xx` require 用到的校验规则插件</span></span><br><span class="line"></span><br><span class="line">ctrlId: &#123;</span><br><span class="line">    type: <span class="string">'TextBox'</span>,</span><br><span class="line">    name: <span class="string">'email'</span>,</span><br><span class="line">    value: <span class="string">''</span>,</span><br><span class="line">    title: <span class="string">'邮箱'</span>,</span><br><span class="line">    plugins: [</span><br><span class="line">        <span class="string">'Validator'</span>,  <span class="comment">// 启用校验插件</span></span><br><span class="line">        <span class="string">'ValidateTip'</span> <span class="comment">// 启用校验 tip 插件</span></span><br><span class="line">    ],</span><br><span class="line">    rules: [ <span class="comment">// 定义校验规则</span></span><br><span class="line">        &#123;</span><br><span class="line">            type: <span class="string">'minlength'</span>,</span><br><span class="line">            minLength: <span class="number">5</span>,</span><br><span class="line">            message: <span class="string">'!&#123;title&#125;长度不能小于!&#123;minLength&#125;'</span></span><br><span class="line">        &#125;,</span><br><span class="line">        &#123;</span><br><span class="line">            type: <span class="string">'maxlength'</span>,</span><br><span class="line">            maxLength: <span class="number">100</span></span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="string">'email'</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
    </div>

    <footer class="article-footer">

      <div class="duoshuo">

        <!-- 多说评论框 start -->
        <div class="ds-thread" data-thread-key="Form" data-title="表单 / Form" data-url="http://ecomfe.github.io/moye/component/Form.html"></div>

        <!-- 多说评论框 end -->
        <!-- 多说公共JS代码 start (一个网页只需插入一次) -->

        <script type="text/javascript">
        window.duoshuoQuery = {short_name:"moye"};
        (function() {
          var ds = document.createElement('script');
          ds.type = 'text/javascript';
          ds.src = '//static.duoshuo.com/embed.js';
          ds.charset = 'UTF-8';
          document.getElementsByTagName('head')[0].appendChild(ds);
        })();
        </script>
        <!-- 多说公共JS代码 end -->

        <!-- Place this tag right after the last button or just before your close body tag. -->
        <script async defer id="github-bjs" src="https://buttons.github.io/buttons.js"></script>
      </div>

    </footer>
  </div>
</article>

    </div>
    <script src="/moye/js/requirejs.min.js" type="text/javascript"></script>
    <script src="//libs.baidu.com/jquery/2.0.3/jquery.min.js" type="text/javascript"></script>

    <script>
    require.config({
        'baseUrl': '/moye/js',
        'paths': {
            'common': './common',
            'highlight': '../dep/highlight/highlight.pack'
        },
        'packages': [{
            'name': 'moye',
            'location': '../dep/moye',
            'main': 'main'
        }],
        'urlArgs': 'v0.0.1'
    });
    </script>
    
</body>
</html>
