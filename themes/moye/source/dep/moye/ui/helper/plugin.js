/*! 2015 Baidu Inc. All Rights Reserved */
define("moye/helper/plugin",["require","../lib","../plugin/Plugin"],function(require){var t=require("../lib"),e=require("../plugin/Plugin");return{createPluginInstance:function(i){var s,n={};if(i instanceof e)return i;var r=t.typeOf(i);if("function"===r)s=i;else if("string"===r)s=t.getClass(i);else if("object"===r)s=t.getClass(i.type),n=i.options||n;if(!s)throw new Error("moye Plugin ["+i+"] cannot found");return new s(n)},initPlugins:function(){var e=this.control,i=e.plugins;if(i&&i.length)return e.plugins=t.map(i,function(t){var i=this.createPluginInstance(t);return i.activate(e),i},this),this;else return void 0},traversalPlugins:function(t){var e=this.control.plugins;if(e)for(var i=e.length-1;i>=0;i--)t.call(this,e[i]);return this},activatePlugins:function(){return this.traversalPlugins(function(t){t.activate()})},inactivatePlugins:function(){return this.traversalPlugins(function(t){t.inactivate()})},disposePlugins:function(){return this.traversalPlugins(function(t){t.inactivate(),t.dispose()}),this.control.plugins=[],this}}});