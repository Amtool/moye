/*! 2015 Baidu Inc. All Rights Reserved */
define("moye/lib/class",["require","./function","./type","./object"],function(require){function t(t){var e=t.prototype;if(e.hasOwnProperty("type")||e.hasOwnProperty("$class")){var i=e.type||e.$class;if(f[i])throw new Error('Class "'+i+'" is already defined');f[i]=t}}function e(t,e){var i=new Function;i.prototype=t.prototype;var n=new i;e=e||{},l.extend(n,e);var s=a(n);for(var r in n)if(n.hasOwnProperty(r)&&h.isFunction(n[r])){var o=n[r];o[u]=s,o[c]=r}s.$parent=t;var f=e.type||e.$class;if(f)t[d][f]=s;return s}function i(t,e){if(h.isFunction(e))e=e.prototype;return l.extend(t.prototype,e),t}function n(){var t=this.$parent.caller,e=t[u];if(!e)throw new Error("this class has no Parent Class");for(var i=t[u].$parent,n=t[c];i;)if(i.prototype.hasOwnProperty(n)){var s=i.prototype[n];if(h.isFunction(s))return i.prototype[n].apply(this,arguments);throw new Error("parent method is not function")}else i=i.$parent;throw new Error("no parent method")}function s(t,e){var i=t[d];return i[e]}function r(t){return t[d]}function a(a){var h=function(){return this.initialize?this.initialize.apply(this,arguments):this};return h.prototype=a||{},t(h),h.prototype.constructor=h,h.prototype.$parent=n,h.extend=o(e,h),h.implement=o(i,h),h.getClass=o(s,h),h.getAllClasses=o(r,h),h[d]={},h}var o=require("./function").curry,h=require("./type"),l=require("./object"),u="__class__",c="__name__",d="__classess__",f={};return{newClass:a,getClass:function(t){return f[t]}}});