/*! 2015 Baidu Inc. All Rights Reserved */
define("moye/ui/plugin/UCSafeInput",["require","jquery","../lib"],function(require){function t(t){e.extend(this,t)}var e=require("jquery"),i=require("../lib"),n="http://cas.baidu.com",s=n+"/ucsl/ucsl.js?appid=228&d="+Math.floor(+new Date/864e5);return t.prototype.execute=function(t){var n=this,r=n.target=t;r.safer=n,e.getScript(s).then(function(){if(n._support=ucsl.support(),n._support){var t=n.fid=i.getId(r,"wrapper"),s=n.wrapper=e('<div id="'+t+'">');e(r.input).replaceWith(s),e(r.main).addClass("uc-safe-input"),r.fire("beforesaferinit",{type:"beforesaferinit",target:n}),n.renderUCInput()}})},t.prototype.renderUCInput=function(){return e(this.wrapper).html(""),ucsl.init({fid:this.fid,ready:e.proxy(this._ready,this),style:{width:this.width,height:this.height}}),this},t.prototype._ready=function(){var t=this,e=t.target;t._isReady=!0,e.fire("saferready",{type:"saferready",target:t})},t.prototype.getValue=function(){var t=this,i=e("input",t.wrapper);return{sid:i[0].value,pwd:i[1].value}},t.prototype.isSupport=function(){return this._support},t.prototype.isReady=function(){return!!this._isReady},t.prototype.flyaway=function(){var t=e(this.target.main);if(!this._flyStyleCache)this._flyStyleCache={position:t.css("position"),left:t.css("left")};return t.css({position:"absolute",left:"-9999px"}),this},t.prototype.flyback=function(){var t=this._flyStyleCache;if(t)return e(this.target.main).css(this._flyStyleCache),this._flyStyleCache=null,this.reset(),this},t.prototype.validate=function(){return ucsl.verify()},t.prototype.reset=function(){return this._isReady=!1,this.renderUCInput()},t.prototype.dispose=function(){this.wrapper=null,this.target.safer=null,this.target=null},function(e){return new t(e)}});