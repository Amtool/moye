/*! 2015 Baidu Inc. All Rights Reserved */
define("moye/ui/main",["require","./lib","./Context"],function(require){var t=require("./lib"),e=require("./Context"),i={uiPrefix:"data-ui",instanceAttr:"data-ctrl-id",uiClassPrefix:"ui",skinClassPrefix:"skin",stateClassPrefix:"state",contextAttr:"data-ctrl-context"},n=e.create("default"),exports={init:function(t,e,s){var r=i.uiPrefix+"-id",a={};return s=s||n,s.fill(e),$("["+r+"]",t).each(function(t,n){var o=n.getAttribute(r),h=n.getAttribute(i.instanceAttr);if(o&&!h){var l=e[o];if(l){var u=l.type;if(!u)throw new Error("you should specify a type to `"+o+"`");var c=$.extend({context:s},l,{id:o,main:n}),f=exports.create(u,c);f.render(),a[o]=f}}}),a},create:function(e,i){var n=t.getClass(e);if(!n)throw new Error("Class "+e+" not found");return delete i.type,new n(i)},get:function(t){return n.get(t)},getControlByDOM:function(t){t=$(t);var e=t.attr(i.instanceAttr);if(e){var n=t.attr(i.contextAttr);if(n){var s=exports.getContext(n);if(s)return s.get(e)}}},getContext:function(t){return t?e.get(t):n},getConfig:function(t){return i[t]},setConfig:function(t,e){return i[t]=e,this}};return exports});