/*! 2015 Baidu Inc. All Rights Reserved */
define("moye/Tab",["require","jquery","./Control","./painter"],function(require){var t=require("jquery"),i=require("./Control"),e=i.extend({type:"Tab",options:{slideInterval:2e3,activeIndex:0,mode:"click"},init:function(i){this.$parent(i),this.activeIndex=+i.activeIndex||0,this.itemClass="."+this.helper.getPartClassName("item"),this.onSwitch=t.proxy(this.onSwitch,this)},initEvents:function(){switch(this.mode){case"click":t(this.main).on("click",this.itemClass,this.onSwitch);break;case"hover":t(this.main).on("mouseenter",this.itemClass,this.onSwitch);break;case"auto":t(this.main).on("click",this.itemClass,this.onSwitch),this.startAutoSlide()}},repaint:require("./painter").createRepaint(i.prototype.repaint,{name:"activeIndex",paint:function(i,e){var s=this.helper.getPartClassName("item-active"),n=t(this.itemClass,this.main);n.eq(e).addClass(s).siblings().removeClass(s),n.each(function(i,s){var n=t(s).data("panel");if(n){var a=t(n);if(a.length)e===i?a.show():a.hide()}}),this.activeIndex=e}}),next:function(){var i=t(this.itemClass,this.main),e=this.activeIndex+1;if(i.length<=e)e=0;this.select(e)},startAutoSlide:function(){if(!this.autoSlideId)this.autoSlideId=setInterval(t.proxy(this.next,this),this.slideInterval)},stopAutoSlide:function(){if(this.autoSlideId)clearInterval(this.autoSlideId),this.autoSlideId=null},select:function(i,e){var s=this.activeIndex;if(s!==i){if(!e){var n=new t.Event("change",{activeIndex:i});if(this.fire(n),n.isDefaultPrevented())return}return this.set("activeIndex",i),this}},onSwitch:function(i){var e=t(i.currentTarget);if(e.is(this.itemClass))this.select(e.data("index"))}});return e});